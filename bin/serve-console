#!/usr/bin/env python
import os
import sys
parent = os.path.join(os.path.abspath(os.path.dirname(__file__)), "..")
sys.path.append(parent)

import console
import http.server
import socketserver

static_dir = os.path.join(parent, "dist", "console")
os.makedirs(static_dir, exist_ok=True)
os.chdir(static_dir)
console.render_to_directory(
    dst_root=static_dir,
    ctx=console.local_context,
    dry_run=False, overwrite=True)
port = 8020
handler = http.server.SimpleHTTPRequestHandler
httpd = socketserver.TCPServer(("", port), handler)
print("Serving CONSOLE on {}".format(port))
httpd.serve_forever()
