#!/usr/bin/env python

import click
import json
import requests
from pathlib import Path


def load_credentials(filename):
    path = Path(filename).expanduser()
    with path.open(mode="r") as file:
        return json.loads(file.read())


@click.group()
def cli():
    pass


@click.command("cu")
@click.argument("credentials_file")
def new_user(credentials_file):
    credentials = load_credentials(credentials_file)
    resp = requests.post(url="", json=credentials)
    resp.raise_for_status()
cli.add_command(new_user)


if __name__ == "__main__":
    cli()
